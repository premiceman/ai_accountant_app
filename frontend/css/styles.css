/* ==========================================================================
   AI Accountant • styles.css  (Option B — Glacier Mint)
   LIGHT THEME • airy, modern, mint accent
   --------------------------------------------------------------------------
   PALETTE
   -- Background        #F6FAF9
   -- Surface           #FFFFFF
   -- Surface Elevated  #F9FCFB
   -- Border/Hairline   #E3EEE9
   -- Text Primary      #0C1520
   -- Text Secondary    #63727E
   -- Brand / Primary   #00C2A8
   -- Brand Hover       #00B39B
   -- Success           #1DB954
   -- Warning           #FFA600
   -- Danger            #FF4D4D
   -- Focus Ring        #BDEFE7
   -- Shadow rgba       rgba(12,21,32,0.08)
   ========================================================================== */

:root,
:root[data-theme="light"]{
  color-scheme: light;
  --bg-body:#e7f6f3;
  --bg-surface:rgba(255,255,255,0.9);
  --bg-surface-2:rgba(244,252,249,0.78);
  --bg-surface-3:rgba(236,248,244,0.6);
  --bd-hairline:rgba(6,88,82,0.14);
  --bd-strong:rgba(6,88,82,0.32);
  --fg:#041c1b;
  --fg-2:rgba(4,28,27,0.72);
  --fg-3:rgba(4,28,27,0.52);
  --brand:#00c7b1;
  --brand-hover:#00b6a0;
  --brand-strong:#00e8cc;
  --success:#28c77a;
  --warning:#ffb347;
  --danger:#ff5f6d;
  --focus:rgba(0,199,177,0.35);
  --glow:0 0 40px rgba(0,199,177,0.28);
  --shadow:0 22px 48px rgba(10,52,46,0.12);
  --shadow-2:0 28px 68px rgba(10,52,46,0.16);
  --surface-blur:24px;
  --grid-line:rgba(0,130,118,0.16);
  --grid-line-strong:rgba(0,130,118,0.24);
  --radius:18px;

  --bs-body-bg:var(--bg-body);
  --bs-body-color:var(--fg);
  --bs-secondary-color:var(--fg-2);
  --bs-border-color:var(--bd-hairline);
  --bs-primary:var(--brand);
  --bs-success:var(--success);
  --bs-warning:var(--warning);
  --bs-danger:var(--danger);
  --bs-link-color:var(--brand);
  --bs-link-hover-color:var(--brand-hover);
}

:root[data-theme="dark"]{
  color-scheme: dark;
  --bg-body:#020a12;
  --bg-surface:rgba(6,24,30,0.78);
  --bg-surface-2:rgba(6,24,30,0.62);
  --bg-surface-3:rgba(4,18,26,0.52);
  --bd-hairline:rgba(0,215,195,0.18);
  --bd-strong:rgba(0,215,195,0.34);
  --fg:#e5faf4;
  --fg-2:rgba(211,239,232,0.82);
  --fg-3:rgba(211,239,232,0.55);
  --brand:#30f0d1;
  --brand-hover:#22d8bc;
  --brand-strong:#5bffe5;
  --success:#37e090;
  --warning:#ffca5c;
  --danger:#ff6f7b;
  --focus:rgba(48,240,209,0.45);
  --glow:0 0 60px rgba(48,240,209,0.32);
  --shadow:0 24px 56px rgba(3,16,24,0.48);
  --shadow-2:0 36px 82px rgba(3,16,24,0.6);
  --surface-blur:28px;
  --grid-line:rgba(48,240,209,0.12);
  --grid-line-strong:rgba(48,240,209,0.2);
  --radius:18px;

  --bs-body-bg:var(--bg-body);
  --bs-body-color:var(--fg);
  --bs-secondary-color:var(--fg-2);
  --bs-border-color:var(--bd-hairline);
  --bs-primary:var(--brand);
  --bs-success:var(--success);
  --bs-warning:var(--warning);
  --bs-danger:var(--danger);
  --bs-link-color:var(--brand);
  --bs-link-hover-color:var(--brand-hover);
}
  
/* Brand mark */
.brand-mark{
  --brand-dot-size: 12px;
  display:inline-flex;
  align-items:center;
  gap:.6rem;
  font-weight:700;
  letter-spacing:.2px;
  text-decoration:none;
  color:inherit;
}
.brand-dot{
  width:var(--brand-dot-size);
  height:var(--brand-dot-size);
  border-radius:50%;
  background:radial-gradient(circle at 30% 30%, var(--brand), var(--brand-hover));
  box-shadow:0 0 calc(var(--brand-dot-size) * 2) color-mix(in oklab, var(--brand) 45%, transparent);
  flex-shrink:0;
}
.brand-mark--lg{
  --brand-dot-size: 18px;
  font-size:clamp(1.35rem, 2vw, 1.75rem);
}

/* base */
html{
  background:var(--bg-body);
  color:var(--fg);
  scroll-behavior:smooth;
}
body{
  min-height:100vh;
  background:transparent;
  color:var(--fg);
  position:relative;
  overflow-x:hidden;
  transition:background-color .4s ease, color .3s ease;
}

/* --------------------------------------------------------------------------
   System utilities • align Bootstrap helpers to theme tokens
   -------------------------------------------------------------------------- */
.text-body,
.text-dark{
  color:var(--fg)!important;
}
.text-secondary{
  color:var(--fg-2)!important;
}
.text-muted{
  color:var(--fg-3)!important;
}
.text-bg-light,
.badge.bg-light,
.badge.text-bg-light{
  background:linear-gradient(145deg, color-mix(in srgb, var(--bg-surface) 88%, transparent), color-mix(in srgb, var(--bg-surface-2) 82%, transparent))!important;
  color:var(--fg)!important;
  border:1px solid color-mix(in srgb, var(--bd-hairline) 80%, transparent)!important;
  box-shadow:inset 0 0 0 1px color-mix(in srgb, var(--bg-surface) 55%, transparent);
}
.badge.text-bg-warning,
.badge.text-bg-warning.text-dark{
  background:linear-gradient(145deg, color-mix(in srgb, var(--warning) 18%, var(--bg-surface)), color-mix(in srgb, var(--warning) 12%, var(--bg-surface-2)))!important;
  color:color-mix(in srgb, var(--warning) 55%, #472400)!important;
  border:1px solid color-mix(in srgb, var(--warning) 36%, transparent)!important;
}
.badge.text-bg-info,
.badge.text-bg-info.text-dark{
  background:linear-gradient(145deg, color-mix(in srgb, var(--brand) 16%, var(--bg-surface)), color-mix(in srgb, var(--brand-hover) 12%, var(--bg-surface-2)))!important;
  color:color-mix(in srgb, var(--brand) 72%, #04332a)!important;
  border:1px solid color-mix(in srgb, var(--brand) 32%, transparent)!important;
}
.bg-white,
.bg-body{
  background:var(--bg-surface)!important;
  color:var(--fg)!important;
}
.bg-light{
  background:linear-gradient(160deg, color-mix(in srgb, var(--bg-surface) 92%, transparent), color-mix(in srgb, var(--bg-surface-2) 80%, transparent))!important;
  color:var(--fg)!important;
}
.border,
.border-top,
.border-bottom,
.border-start,
.border-end{
  border-color:var(--bd-hairline)!important;
}
.text-bg-light.text-dark,
.bg-light.text-dark,
.bg-white.text-dark,
.badge.text-bg-warning.text-dark,
.badge.bg-light.text-dark{
  color:var(--fg)!important;
}

html[data-theme="dark"] .text-secondary{
  color:var(--fg-2)!important;
}
html[data-theme="dark"] .text-muted{
  color:var(--fg-3)!important;
}
html[data-theme="dark"] .text-bg-light,
html[data-theme="dark"] .badge.bg-light,
html[data-theme="dark"] .badge.text-bg-light{
  background:linear-gradient(145deg, color-mix(in srgb, var(--bg-surface-2) 74%, rgba(0,0,0,0.45)), color-mix(in srgb, var(--bg-surface-3) 70%, rgba(0,0,0,0.55)))!important;
  color:var(--fg)!important;
  border-color:color-mix(in srgb, var(--bd-strong) 70%, transparent)!important;
  box-shadow:inset 0 0 0 1px color-mix(in srgb, var(--bg-surface-3) 55%, rgba(0,0,0,0.45));
}
html[data-theme="dark"] .badge.text-bg-warning,
html[data-theme="dark"] .badge.text-bg-warning.text-dark{
  background:linear-gradient(145deg, color-mix(in srgb, var(--warning) 26%, rgba(0,0,0,0.6)), color-mix(in srgb, var(--warning) 18%, rgba(0,0,0,0.45)))!important;
  color:color-mix(in srgb, var(--warning) 82%, var(--fg))!important;
  border-color:color-mix(in srgb, var(--warning) 42%, transparent)!important;
}
html[data-theme="dark"] .badge.text-bg-info,
html[data-theme="dark"] .badge.text-bg-info.text-dark{
  background:linear-gradient(145deg, color-mix(in srgb, var(--brand) 28%, rgba(0,0,0,0.55)), color-mix(in srgb, var(--brand-hover) 24%, rgba(0,0,0,0.45)))!important;
  color:color-mix(in srgb, var(--brand-strong) 82%, var(--fg))!important;
  border-color:color-mix(in srgb, var(--brand) 38%, transparent)!important;
}
html[data-theme="dark"] .bg-white,
html[data-theme="dark"] .bg-body{
  background:color-mix(in srgb, var(--bg-surface) 78%, rgba(0,0,0,0.45))!important;
}
html[data-theme="dark"] .bg-light{
  background:linear-gradient(160deg, color-mix(in srgb, var(--bg-surface-2) 70%, rgba(0,0,0,0.55)), color-mix(in srgb, var(--bg-surface-3) 68%, rgba(0,0,0,0.65)))!important;
}
html[data-theme="dark"] .border,
html[data-theme="dark"] .border-top,
html[data-theme="dark"] .border-bottom,
html[data-theme="dark"] .border-start,
html[data-theme="dark"] .border-end{
  border-color:color-mix(in srgb, var(--bd-strong) 70%, transparent)!important;
}

body::before,
body::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:-2;
  transition:opacity .6s ease, filter .6s ease;
}
body::before{
  background:
    radial-gradient(48% 48% at 20% 18%, color-mix(in srgb, var(--brand-strong) 55%, transparent) 0%, transparent 68%),
    radial-gradient(46% 46% at 78% 12%, color-mix(in srgb, var(--brand) 48%, transparent) 0%, transparent 70%),
    radial-gradient(40% 40% at 60% 78%, color-mix(in srgb, var(--brand-hover) 42%, transparent) 0%, transparent 76%),
    radial-gradient(36% 36% at 12% 78%, color-mix(in srgb, var(--brand) 32%, transparent) 0%, transparent 82%);
  opacity:.85;
  filter:saturate(1.15);
  animation:liquidPulse 24s ease-in-out infinite alternate;
}
body::after{
  z-index:-1;
  background-image:
    linear-gradient(to right, var(--grid-line) 1px, transparent 1px),
    linear-gradient(to bottom, var(--grid-line) 1px, transparent 1px);
  background-size:120px 120px;
  mix-blend-mode:soft-light;
  opacity:.35;
  mask-image:linear-gradient(to bottom, rgba(0,0,0,0.95) 0%, rgba(0,0,0,0.2) 65%, transparent 100%);
}
html[data-theme="dark"] body::before{
  opacity:.6;
  filter:saturate(1.05) brightness(.82);
}
html[data-theme="dark"] body::after{
  opacity:.24;
  mix-blend-mode:screen;
}
@keyframes liquidPulse{
  0%{transform:translate3d(-1%, -1%, 0) scale(1);} 
  50%{transform:translate3d(1%, 1%, 0) scale(1.05);} 
  100%{transform:translate3d(-2%, 1%, 0) scale(1.02);} 
}
h1,h2,h3,h4,h5,h6{
  color:var(--fg);
  letter-spacing:.1px;
  transition:color .3s ease;
}
.card,.modal-content,.dropdown-menu,.list-group-item,.alert,.toast{
  border-radius:var(--radius);
  border:1px solid var(--bd-hairline);
  background:linear-gradient(160deg, var(--bg-surface) 0%, var(--bg-surface-2) 100%);
  backdrop-filter:blur(var(--surface-blur));
  box-shadow:var(--shadow);
  color:var(--fg);
  transition:background .4s ease, border-color .4s ease, box-shadow .4s ease, color .3s ease;
}
.dropdown-menu{backdrop-filter:blur(calc(var(--surface-blur) * 0.65));}
.card:hover{
  box-shadow:var(--shadow-2);
}
.form-control,.form-select,.input-group-text{
  border-radius:calc(var(--radius) - 8px);
  background:linear-gradient(150deg, var(--bg-surface-2), var(--bg-surface-3));
  border:1px solid var(--bd-hairline);
  color:var(--fg);
  transition:background .3s ease, border-color .3s ease, color .3s ease, box-shadow .3s ease;
  backdrop-filter:blur(calc(var(--surface-blur) * 0.65));
}
.form-control:focus,.form-select:focus{
  border-color:var(--brand);
  box-shadow:0 0 0 4px color-mix(in srgb, var(--brand) 32%, transparent);
}
.list-group-item{backdrop-filter:blur(calc(var(--surface-blur) * 0.5));}
.progress{background:var(--bg-surface-3); border-radius:999px; border:1px solid var(--bd-hairline); overflow:hidden;}
a,button,.btn,.list-group-item,.nav-link,.form-control,.form-select{
  transition:all .2s ease, transform .2s ease, box-shadow .2s ease;
}
a{color:var(--brand);}
a:hover{color:var(--brand-hover);}

@media (max-width: 767.98px){
  .container, .container-fluid{
    padding-left: max(1rem, env(safe-area-inset-left));
    padding-right: max(1rem, env(safe-area-inset-right));
  }
}

/* --------------------------------------------------------------------------
   Mobile bento navigation (app shell)
   -------------------------------------------------------------------------- */
.app-bento-toggle{
  display:none;
  width:44px; height:44px;
  border-radius:14px;
  border:1px solid color-mix(in oklab, var(--bd-hairline) 60%, transparent);
  background:linear-gradient(160deg, color-mix(in oklab, var(--bg-surface) 96%, transparent), color-mix(in oklab, var(--bg-surface-2) 82%, transparent));
  box-shadow:0 10px 24px rgba(12,21,32,0.08);
  align-items:center; justify-content:center;
  color:var(--fg-2);
  padding:0;
  transition:transform .16s ease, color .16s ease, box-shadow .16s ease;
  margin-right:.25rem;
}
.app-bento-toggle:hover{ color:var(--fg); transform:translateY(-1px); }
.app-bento-toggle:focus-visible{ outline:3px solid var(--focus); outline-offset:3px; }
.app-bento-toggle__dots{ display:grid; grid-template-columns:repeat(3,6px); grid-auto-rows:6px; gap:4px; }
.app-bento-toggle__dots span{ display:block; width:6px; height:6px; border-radius:50%; background:color-mix(in oklab, var(--brand) 22%, white); box-shadow:0 2px 4px rgba(12,21,32,0.18); }

.app-bento-menu{
  position:fixed; inset:0;
  background:linear-gradient(140deg, color-mix(in oklab, var(--bg-body) 88%, transparent) 0%, color-mix(in oklab, var(--bg-surface-2) 96%, transparent) 50%, color-mix(in oklab, var(--brand) 12%, transparent) 100%);
  backdrop-filter:blur(16px);
  padding-top:clamp(1rem, 4vw, 1.5rem);
  display:flex; flex-direction:column;
  gap:clamp(1rem, 4vw, 1.5rem);
  opacity:0; transform:translateY(16px);
  pointer-events:none;
  transition:opacity .3s ease, transform .3s ease;
  z-index:1400;
  overflow-y:auto; -webkit-overflow-scrolling:touch;
  scrollbar-gutter:stable both-edges;
}
.app-bento-menu::before{
  content:""; position:absolute; inset:12% 8% auto 8%; height:280px;
  background:radial-gradient(circle at top, color-mix(in oklab, var(--brand) 32%, transparent), transparent 68%);
  opacity:.55; filter:blur(20px); pointer-events:none;
}
.app-bento-menu.is-open{ opacity:1; transform:translateY(0); pointer-events:auto; }
.app-bento__header, .app-bento__groups{ position:relative; z-index:1; }
.app-bento__header{
  display:flex; align-items:flex-start; justify-content:space-between; gap:1.5rem;
  padding:0 clamp(1.5rem, 7vw, 2.75rem);
}
.app-bento__eyebrow{ letter-spacing:.18em; color:var(--fg-2); font-size:.75rem; text-transform:uppercase; }
.app-bento__title{ font-size:clamp(1.5rem, 5vw, 2.5rem); }
.app-bento__subtitle{ color:var(--fg-2); font-size:.95rem; max-width:36ch; }
.app-bento__close{
  width:48px; height:48px; border-radius:16px;
  border:1px solid color-mix(in oklab, var(--bd-hairline) 70%, transparent);
  background:linear-gradient(160deg, var(--bg-surface) 30%, var(--bg-surface-2) 100%);
  display:flex; align-items:center; justify-content:center;
  color:var(--fg);
  box-shadow:0 12px 26px rgba(12,21,32,0.12);
  transition:transform .2s ease, box-shadow .2s ease;
}
.app-bento__close:hover{ transform:translateY(-2px); box-shadow:0 16px 32px rgba(12,21,32,0.16); }
.app-bento__groups{ display:flex; flex-direction:column; gap:clamp(1.5rem, 6vw, 2.5rem); padding:0 clamp(1.5rem, 7vw, 2.75rem) clamp(2.5rem, 9vw, 3.5rem); }
.app-bento__group{ display:flex; flex-direction:column; gap:clamp(.75rem, 3vw, 1.25rem); }
.app-bento__group-title{ text-transform:uppercase; letter-spacing:.18em; font-size:.75rem; color:var(--fg-2); }
.app-bento__tiles{ display:grid; gap:clamp(1rem, 6vw, 2rem); grid-template-columns:repeat(auto-fit, minmax(220px, 1fr)); }
.app-bento__tile{
  position:relative;
  border-radius:24px;
  border:1px solid color-mix(in oklab, var(--bd-hairline) 80%, transparent);
  background:linear-gradient(160deg, var(--bg-surface) 55%, color-mix(in oklab, var(--bg-surface-2) 80%, transparent));
  padding:clamp(1.35rem, 5vw, 1.85rem);
  text-decoration:none; color:inherit;
  display:flex; flex-direction:column; gap:.45rem;
  box-shadow:0 18px 36px rgba(12,21,32,0.12);
  transition:transform .25s ease, box-shadow .25s ease, background .25s ease;
}
.app-bento__tile::after{
  content:""; position:absolute; inset:auto 18% -24px 18%; height:40px; border-radius:999px;
  background:radial-gradient(circle, rgba(12,21,32,0.16), transparent 70%);
  opacity:0; transition:opacity .25s ease;
}
.app-bento__tile:hover{ transform:translateY(-6px); box-shadow:0 26px 46px rgba(12,21,32,0.18); }
.app-bento__tile:hover::after{ opacity:1; }
.app-bento__tile-icon{
  width:48px;
  height:48px;
  border-radius:16px;
  display:grid;
  place-items:center;
  background:linear-gradient(145deg, color-mix(in oklab, var(--brand) 18%, var(--bg-surface)), color-mix(in oklab, var(--brand-hover) 12%, var(--bg-surface-2)));
  color:color-mix(in oklab, var(--brand) 82%, var(--fg));
  font-size:1.35rem;
  box-shadow:0 12px 28px color-mix(in srgb, var(--brand) 32%, rgba(4,24,24,0.16));
}
.app-bento__tile-title{ font-weight:600; font-size:1.1rem; }
.app-bento__tile-copy{ color:var(--fg-2); font-size:.95rem; line-height:1.5; }
.app-bento__tile--accent{
  background:linear-gradient(155deg, color-mix(in oklab, var(--brand) 16%, var(--bg-surface)) 0%, color-mix(in oklab, var(--brand-hover) 18%, var(--bg-surface-2)) 100%);
  color:color-mix(in oklab, var(--brand) 65%, var(--fg));
  box-shadow:0 24px 46px color-mix(in srgb, var(--brand) 28%, rgba(4,24,24,0.18));
}
.app-bento__tile--accent .app-bento__tile-icon{
  background:linear-gradient(145deg, color-mix(in oklab, var(--brand) 18%, rgba(255,255,255,0.85)), color-mix(in oklab, var(--brand-hover) 18%, rgba(255,255,255,0.85)));
  color:color-mix(in oklab, var(--brand) 88%, #06392f);
  box-shadow:0 12px 28px color-mix(in srgb, var(--brand) 28%, rgba(4,24,24,0.18));
}
.app-bento__tile--danger{
  background:linear-gradient(155deg, color-mix(in oklab, var(--danger) 18%, var(--bg-surface)) 0%, color-mix(in oklab, var(--danger) 12%, var(--bg-surface-2)) 100%);
  color:color-mix(in oklab, var(--danger) 65%, var(--fg));
  box-shadow:0 22px 40px color-mix(in srgb, var(--danger) 24%, rgba(4,24,24,0.18));
}
.app-bento__tile--danger .app-bento__tile-icon{
  background:linear-gradient(145deg, color-mix(in oklab, var(--danger) 24%, rgba(255,255,255,0.9)), color-mix(in oklab, var(--danger) 18%, rgba(255,255,255,0.82)));
  color:color-mix(in oklab, var(--danger) 86%, #3b1111);
  box-shadow:0 12px 28px color-mix(in srgb, var(--danger) 28%, rgba(4,24,24,0.2));
}
.app-bento__tile--accent .app-bento__tile-copy,
.app-bento__tile--danger .app-bento__tile-copy{
  color:color-mix(in oklab, currentColor 45%, var(--fg-2));
}

html[data-theme="dark"] .app-bento__tile-icon{
  background:linear-gradient(145deg, color-mix(in oklab, var(--brand) 22%, rgba(0,0,0,0.55)), color-mix(in oklab, var(--brand-hover) 18%, rgba(0,0,0,0.5)));
  color:color-mix(in oklab, var(--brand-strong) 82%, rgba(255,255,255,0.85));
  box-shadow:0 12px 32px color-mix(in srgb, var(--brand) 36%, rgba(0,0,0,0.55));
}
html[data-theme="dark"] .app-bento__tile--accent{
  background:linear-gradient(155deg, color-mix(in oklab, var(--brand) 24%, rgba(0,0,0,0.65)) 0%, color-mix(in oklab, var(--brand-strong) 26%, rgba(0,0,0,0.6)) 100%);
  color:color-mix(in oklab, var(--brand-strong) 80%, #021b16);
  box-shadow:0 26px 52px color-mix(in srgb, var(--brand) 38%, rgba(0,0,0,0.5));
}
html[data-theme="dark"] .app-bento__tile--accent .app-bento__tile-icon{
  background:linear-gradient(145deg, color-mix(in oklab, var(--brand-strong) 35%, rgba(0,0,0,0.4)), color-mix(in oklab, var(--brand) 28%, rgba(0,0,0,0.35)));
  color:color-mix(in oklab, var(--brand-strong) 88%, rgba(255,255,255,0.9));
  box-shadow:0 14px 32px color-mix(in srgb, var(--brand) 38%, rgba(0,0,0,0.55));
}
html[data-theme="dark"] .app-bento__tile--danger{
  background:linear-gradient(155deg, color-mix(in oklab, var(--danger) 26%, rgba(0,0,0,0.65)) 0%, color-mix(in oklab, var(--danger) 18%, rgba(0,0,0,0.6)) 100%);
  color:color-mix(in oklab, var(--danger) 78%, rgba(255,255,255,0.85));
  box-shadow:0 24px 48px color-mix(in srgb, var(--danger) 34%, rgba(0,0,0,0.5));
}
html[data-theme="dark"] .app-bento__tile--danger .app-bento__tile-icon{
  background:linear-gradient(145deg, color-mix(in oklab, var(--danger) 32%, rgba(0,0,0,0.45)), color-mix(in oklab, var(--danger) 24%, rgba(0,0,0,0.4)));
  color:color-mix(in oklab, var(--danger) 86%, rgba(255,255,255,0.9));
  box-shadow:0 14px 30px color-mix(in srgb, var(--danger) 36%, rgba(0,0,0,0.55));
}
.app-bento__tile[disabled]{ pointer-events:none; opacity:.6; }

html.app-bento-open, body.app-bento-open{ overflow:hidden; height:100%; }

@media (max-width: 991.98px){
  #sidebar-container{ display:none !important; }
  .app-bento-toggle{ display:inline-flex; }
}

#topbar-container{
  position:relative;
  z-index:1020;
}
#topbar-container .container-fluid{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:.75rem;
  padding-inline:clamp(1rem, 4vw, 1.75rem);
}
#topbar-container .container-fluid > *:last-child{ margin-left:auto; }

@media (min-width: 992px){
  #topbar-container .container-fluid{
    padding-left:calc(var(--sidebar-collapsed) + clamp(1.25rem, 3vw, 2.5rem));
    padding-right:clamp(1.25rem, 3vw, 2.5rem);
  }
}

@media (max-width: 767.98px){
  #topbar-container .theme-toggle{ padding:0.3rem 0.4rem; }
  #topbar-container .theme-toggle .theme-toggle__label{ display:none; }
}

@media (max-width: 575.98px){
  .app-bento__tiles{ grid-template-columns: 1fr; }
  .app-bento__header{ flex-direction:column; align-items:flex-start; }
  .app-bento__close{ align-self:flex-end; }
}

@media (min-width: 992px){
  .app-bento-menu{ display:none !important; }
}
  
  /* navbar */
  .navbar{background:var(--bg-surface)!important;border-bottom:1px solid var(--bd-hairline)}
  .navbar .nav-link{color:var(--fg-2)} .navbar .nav-link:hover{color:var(--fg)}

.topbar-glass{
  background:linear-gradient(120deg, color-mix(in oklab, var(--bg-surface) 80%, var(--brand) 12%) 0%, color-mix(in oklab, var(--bg-surface-2) 86%, white) 100%)!important;
  border-bottom:1px solid color-mix(in oklab, var(--brand) 14%, var(--bd-hairline));
  box-shadow:0 14px 42px rgba(12,21,32,0.12);
  backdrop-filter:blur(14px);
  position:fixed;
  top:0;
  left:0;
  right:0;
  z-index:1040;
}

.topbar-actions{ flex-wrap:wrap; justify-content:flex-end; }
.topbar-tagline{ gap:.5rem; font-size:.95rem; }
.topbar-status{
  display:inline-flex;
  align-items:center;
  gap:.4rem;
  padding:.35rem .75rem;
  background:linear-gradient(140deg, color-mix(in srgb, var(--brand) 26%, var(--bg-surface)) 0%, color-mix(in srgb, var(--brand-hover) 18%, var(--bg-surface-2)) 100%);
  color:color-mix(in srgb, var(--brand) 68%, #083d33);
  letter-spacing:.08em;
  border:1px solid color-mix(in srgb, var(--brand) 38%, transparent);
  box-shadow:0 16px 36px color-mix(in srgb, var(--brand) 28%, rgba(4,24,24,0.25));
  backdrop-filter:blur(calc(var(--surface-blur) * 0.3));
}
html[data-theme="dark"] .topbar-status{
  color:color-mix(in srgb, var(--brand-strong) 74%, #021b16);
  background:linear-gradient(140deg, color-mix(in srgb, var(--brand) 28%, rgba(0,0,0,0.65)) 0%, color-mix(in srgb, var(--brand-strong) 24%, rgba(0,0,0,0.55)) 100%);
  border-color:color-mix(in srgb, var(--brand-strong) 40%, transparent);
  box-shadow:0 18px 42px color-mix(in srgb, var(--brand) 42%, rgba(0,0,0,0.6));
}

.pulse-dot{
  width:9px;
  height:9px;
  border-radius:50%;
  background:var(--success);
  box-shadow:0 0 0 0 rgba(29,185,84,0.45);
  animation:topbarPulse 2.4s ease-out infinite;
}

@keyframes topbarPulse{
  0%{ box-shadow:0 0 0 0 rgba(29,185,84,0.45); }
  70%{ box-shadow:0 0 0 8px rgba(29,185,84,0); }
  100%{ box-shadow:0 0 0 0 rgba(29,185,84,0); }
}

.topbar-user-meta{ min-width:0; }
.topbar-user-chip{
  display:flex;
  align-items:center;
  gap:.75rem;
  padding:.35rem .85rem;
  border-radius:999px;
  background:linear-gradient(140deg, color-mix(in srgb, var(--bg-surface) 92%, transparent), color-mix(in srgb, var(--bg-surface-2) 86%, transparent));
  border:1px solid color-mix(in srgb, var(--bd-hairline) 78%, transparent);
  box-shadow:0 18px 42px rgba(4,24,24,0.18);
  backdrop-filter:blur(calc(var(--surface-blur) * 0.45));
}
html[data-theme="dark"] .topbar-user-chip{
  border-color:color-mix(in srgb, var(--bd-hairline) 68%, transparent);
  box-shadow:0 20px 48px rgba(0,0,0,0.55);
}

.topbar-avatar{
  width:34px;
  height:34px;
  border-radius:50%;
  display:grid;
  place-items:center;
  font-weight:600;
  background:color-mix(in oklab, var(--brand) 18%, white);
  color:color-mix(in oklab, var(--brand) 80%, #073d33);
  box-shadow:0 8px 18px rgba(0,194,168,0.18);
}

.topbar-user-details{ display:flex; flex-direction:column; line-height:1.2; }
.topbar-user-name{ font-weight:600; color:var(--fg); max-width:180px; white-space:nowrap; overflow:hidden; text-overflow:ellipsis; }
.topbar-user-plan{ color:var(--fg-2); font-size:.8rem; display:flex; align-items:center; }
.topbar-user-plan .badge{ margin-left:.5rem; font-weight:600; letter-spacing:.02em; }

@media (max-width: 767.98px){
  .topbar-glass{ border-radius:0; box-shadow:0 10px 28px rgba(12,21,32,0.1); }
  .topbar-user-name{ max-width:120px; }
}

@media (max-width: 575.98px){
  .topbar-tagline{ display:none !important; }
  .topbar-actions{ gap:.75rem; }
  .topbar-user-chip{ padding:.25rem .6rem; }
}
  
  /* cards */
  .card{background:var(--bg-surface); border:1px solid var(--bd-hairline); box-shadow:var(--shadow)}
  .gradient-card{position:relative; overflow:hidden;}
  .gradient-card::before{
    content:""; position:absolute; inset:-40% -20% auto; height:70%;
    background:radial-gradient(circle at top left, color-mix(in oklab, var(--brand) 45%, white) 0%, transparent 65%);
    opacity:.65; pointer-events:none;
  }
  .gradient-card::after{
    content:""; position:absolute; inset:auto -30% -40%; height:70%;
    background:radial-gradient(circle at bottom right, color-mix(in oklab, var(--brand-hover) 45%, white) 0%, transparent 65%);
    opacity:.55; pointer-events:none;
  }
  .gradient-card.gradient-card--wealth::before{background:radial-gradient(circle at top left, color-mix(in oklab, var(--success) 38%, white) 0%, transparent 68%);}
  .gradient-card.gradient-card--wealth::after{background:radial-gradient(circle at bottom right, color-mix(in oklab, var(--brand) 30%, white) 0%, transparent 70%);}
  .gradient-card.gradient-card--comp::before{background:radial-gradient(circle at top left, color-mix(in oklab, var(--brand) 45%, white) 0%, transparent 68%);}
  .gradient-card.gradient-card--comp::after{background:radial-gradient(circle at bottom right, color-mix(in oklab, #6c63ff 45%, white) 0%, transparent 70%);}
  .gradient-card .card-body{position:relative; z-index:1;}
.card.locked{filter:grayscale(.5); opacity:.6}

.locked-overlay{
  position:absolute; inset:0;
  background:rgba(8,16,32,0.68);
  color:#fff;
  display:flex; align-items:center; justify-content:center;
  text-align:center; padding:2rem;
}
.locked-overlay__content{max-width:320px;}

.dashboard-loading-overlay{
  position:absolute;
  inset:0;
  border-radius:var(--radius);
  background:rgba(12,21,32,0.45);
  backdrop-filter:blur(3px);
  display:flex;
  align-items:center;
  justify-content:center;
  z-index:20;
}
.dashboard-loading-overlay__content{
  text-align:center;
  color:#fff;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:0.5rem;
}
#accounting-section.is-loading .card{
  opacity:0.5;
  pointer-events:none;
}
  [data-required-tier]{position:relative;}
  [data-required-tier] .card{position:relative; overflow:hidden;}
  
  /* buttons */
  .btn,.btn-primary,.btn-secondary{
    --bs-btn-color:var(--fg);
    --bs-btn-bg:linear-gradient(135deg, var(--brand) 0%, var(--brand-strong) 100%);
    --bs-btn-border-color:color-mix(in srgb, var(--brand) 86%, transparent);
    --bs-btn-hover-bg:linear-gradient(135deg, var(--brand-strong) 0%, var(--brand-hover) 100%);
    --bs-btn-hover-border-color:color-mix(in srgb, var(--brand-hover) 86%, transparent);
    --bs-btn-active-bg:linear-gradient(135deg, var(--brand-hover) 0%, var(--brand) 100%);
    --bs-btn-active-border-color:color-mix(in srgb, var(--brand) 86%, transparent);
    border-radius:999px;
    border:1px solid color-mix(in srgb, var(--brand) 65%, transparent);
    box-shadow:0 14px 28px color-mix(in srgb, var(--brand) 32%, transparent);
    color:var(--fg) !important;
    font-weight:600;
    letter-spacing:.01em;
    backdrop-filter:blur(calc(var(--surface-blur) * 0.35));
    position:relative;
    overflow:hidden;
  }
  .btn::after{
    content:"";
    position:absolute;
    inset:0;
    background:radial-gradient(circle at 30% 30%, rgba(255,255,255,0.6), transparent 65%);
    opacity:0;
    transition:opacity .3s ease;
  }
  .btn:hover{
    transform:translateY(-2px);
    box-shadow:0 18px 34px color-mix(in srgb, var(--brand) 40%, transparent);
  }
  .btn:hover::after{opacity:.45;}
  .btn:active{
    transform:translateY(0);
    box-shadow:0 10px 22px color-mix(in srgb, var(--brand) 28%, transparent);
  }
  html[data-theme="dark"] .btn,
  html[data-theme="dark"] .btn-primary,
  html[data-theme="dark"] .btn-secondary{
    --bs-btn-color:var(--fg);
    color:var(--fg) !important;
    box-shadow:0 18px 40px color-mix(in srgb, var(--brand) 40%, rgba(2,10,20,0.4));
  }
  .btn-outline-primary{
    color:var(--brand);
    border-color:color-mix(in srgb, var(--brand) 70%, transparent);
    background:linear-gradient(140deg, color-mix(in srgb, var(--bg-surface) 88%, transparent), color-mix(in srgb, var(--bg-surface-2) 78%, transparent));
    box-shadow:0 12px 28px rgba(4,24,24,0.08);
  }
  .btn-outline-primary:hover{
    color:var(--fg);
    background:linear-gradient(140deg, color-mix(in srgb, var(--brand) 20%, var(--bg-surface)) 0%, color-mix(in srgb, var(--brand-hover) 30%, var(--bg-surface-2)) 100%);
    border-color:color-mix(in srgb, var(--brand-hover) 70%, transparent);
  }
  
  /* forms */
  .form-control,.form-select{background:linear-gradient(150deg, var(--bg-surface-2), var(--bg-surface-3));border:1px solid var(--bd-hairline);color:var(--fg)}
  .form-control:focus,.form-select:focus{border-color:var(--brand); box-shadow:0 0 0 3px var(--focus)}
  .input-group-text{background:var(--bg-surface-2); border-color:var(--bd-hairline)}
  
  /* tables (incl. events) */
  .table,
  .events-table{
    background:color-mix(in srgb, var(--bg-surface) 92%, transparent);
    border-color:var(--bd-hairline);
    color:var(--fg);
  }
  .table > :not(caption) > * > *{
    background-color:transparent;
    border-color:color-mix(in srgb, var(--bd-hairline) 78%, transparent);
    box-shadow:none;
  }
  .table thead th,
  .events-table th{
    background:linear-gradient(135deg, color-mix(in srgb, var(--bg-surface) 86%, transparent), color-mix(in srgb, var(--bg-surface-2) 82%, transparent));
    color:var(--fg-2);
    border-bottom:1px solid color-mix(in srgb, var(--bd-hairline) 82%, transparent);
    font-weight:600;
    letter-spacing:.02em;
    font-size:.82rem;
  }
  .table-striped > tbody > tr:nth-of-type(odd) > *{
    background:color-mix(in srgb, var(--bg-surface-2) 72%, transparent);
  }
  .table-hover > tbody > tr:hover > *{
    background:color-mix(in srgb, var(--brand) 6%, var(--bg-surface-2));
    color:var(--fg);
  }
  .table caption{
    color:var(--fg-2);
  }
  .events-table th{
    position:sticky;
    top:0;
    z-index:1;
  }
  tr.event-user td .event-title{color:var(--brand)}
  .delete-btn{color:var(--danger); background:transparent; border:none; font-weight:700}

  html[data-theme="dark"] .table,
  html[data-theme="dark"] .events-table{
    background:linear-gradient(135deg, color-mix(in srgb, var(--bg-surface) 78%, rgba(0,0,0,0.55)), color-mix(in srgb, var(--bg-surface-2) 72%, rgba(0,0,0,0.5)));
    border-color:color-mix(in srgb, var(--bd-strong) 70%, transparent);
  }
  html[data-theme="dark"] .table > :not(caption) > * > *{
    border-color:color-mix(in srgb, var(--bd-strong) 70%, transparent);
  }
  html[data-theme="dark"] .table thead th,
  html[data-theme="dark"] .events-table th{
    background:linear-gradient(135deg, color-mix(in srgb, var(--bg-surface-2) 70%, rgba(0,0,0,0.55)), color-mix(in srgb, var(--bg-surface-3) 68%, rgba(0,0,0,0.6)));
    color:color-mix(in srgb, var(--fg) 85%, var(--brand));
    border-bottom-color:color-mix(in srgb, var(--bd-strong) 74%, transparent);
  }
  html[data-theme="dark"] .table-striped > tbody > tr:nth-of-type(odd) > *{
    background:color-mix(in srgb, var(--bg-surface-3) 78%, rgba(0,0,0,0.55));
  }
  html[data-theme="dark"] .table-hover > tbody > tr:hover > *{
    background:color-mix(in srgb, var(--brand) 18%, rgba(0,0,0,0.65));
    color:var(--fg);
  }
  
  /* events scroll */
  .events-card{display:flex;flex-direction:column;height:420px}
  .events-scroll{flex:1 1 auto;overflow:auto;border:1px solid var(--bd-hairline);border-radius:12px}
  .events-scroll::-webkit-scrollbar{height:8px;width:8px}
  .events-scroll::-webkit-scrollbar-thumb{background:#cfe9e3;border-radius:8px}
  
  /* list groups */
  .list-group-item{background:var(--bg-surface); border-color:var(--bd-hairline)}
  .list-group-item:hover{background:var(--bg-surface-2)}
  
  /* alerts/badges */
  .alert{border:1px solid var(--bd-hairline); background:var(--bg-surface)}
  .badge{border-radius:999px}
  
  /* progress */
  .progress{background:var(--bg-surface-2); border:1px solid var(--bd-hairline)}
  .progress-bar{background:var(--brand)}

  /* timelines */
  .timeline{list-style:none;padding:0;margin:0;position:relative;}
  .timeline::before{content:"";position:absolute;left:14px;top:0;bottom:0;width:2px;background:var(--bd-hairline);}
  .timeline-item{position:relative;padding-left:44px;margin-bottom:1.5rem;}
  .timeline-point{position:absolute;left:6px;top:2px;width:16px;height:16px;border-radius:999px;background:var(--brand);box-shadow:0 0 0 4px color-mix(in oklab,var(--brand) 20%,transparent);}
  .timeline-content{background:var(--bg-surface);border:1px solid var(--bd-hairline);border-radius:14px;padding:12px 16px;box-shadow:var(--shadow);}
  
  /* modals/tooltips */
  .modal-content{background:var(--bg-surface); border:1px solid var(--bd-hairline); box-shadow:var(--shadow)}
  .tooltip .tooltip-inner{background:#0E151A;color:#fff;border:1px solid #0E151A}

  /* utilities */
  .text-muted,.muted{color:var(--fg-2)!important}
  .shadow-soft{box-shadow:var(--shadow)}

/* ==========================================================================
   Onboarding Glacier Mint theme overrides
   ========================================================================== */
body.onboarding-body{
  background:radial-gradient(circle at top left,
    color-mix(in oklab, var(--brand) 32%, white) 0%,
    color-mix(in oklab, var(--bg-body) 90%, var(--brand) 12%) 55%,
    var(--bg-body) 100%) !important;
  color:var(--fg) !important;
}
body.onboarding-body .onboarding-shell{background:transparent !important;}
body.onboarding-body .onboarding-sidebar{
  background:linear-gradient(165deg,
    color-mix(in oklab, var(--brand) 85%, #083d33) 0%,
    color-mix(in oklab, var(--brand-hover) 78%, #0C1520) 100%) !important;
  border-right:1px solid color-mix(in oklab, var(--brand) 35%, white) !important;
  color:rgba(255,255,255,0.94) !important;
  box-shadow:0 24px 48px rgba(12,21,32,0.22);
}
body.onboarding-body .onboarding-logo{color:rgba(255,255,255,0.95) !important;}
body.onboarding-body .onboarding-logo span.badge{
  background:color-mix(in oklab, rgba(255,255,255,0.9) 70%, transparent) !important;
  color:var(--brand-hover) !important;
}
body.onboarding-body .onboarding-progress{color:rgba(255,255,255,0.78) !important;}
body.onboarding-body .onboarding-progress-bar{
  background:color-mix(in oklab, rgba(255,255,255,0.65) 75%, transparent) !important;
}
body.onboarding-body .onboarding-progress-bar span{
  background:linear-gradient(90deg, var(--brand), color-mix(in oklab, var(--brand-hover) 70%, white)) !important;
}
body.onboarding-body .insight-card{
  background:color-mix(in oklab, rgba(255,255,255,0.16) 70%, transparent) !important;
  border:1px solid color-mix(in oklab, var(--brand) 28%, transparent);
  color:rgba(255,255,255,0.9);
  box-shadow:0 18px 44px rgba(12,21,32,0.22);
}
body.onboarding-body .insight-card .insight-body{color:rgba(238,247,244,0.78) !important;}
body.onboarding-body .onboarding-main{
  background:linear-gradient(140deg, var(--bg-surface) 0%, color-mix(in oklab, var(--bg-body) 86%, white) 65%, #FFFFFF 100%) !important;
  color:var(--fg) !important;
}
body.onboarding-body .step-eyebrow{color:color-mix(in oklab, var(--brand) 45%, var(--fg-2)) !important;}
body.onboarding-body .choice-grid .choice-tile{
  border:1px solid color-mix(in oklab, var(--brand) 16%, var(--bd-hairline)) !important;
  background:var(--bg-surface) !important;
  box-shadow:0 12px 32px rgba(12,21,32,0.08) !important;
  color:var(--fg) !important;
}
body.onboarding-body .choice-grid .choice-tile.active{
  border-color:var(--brand) !important;
  box-shadow:0 20px 46px color-mix(in oklab, var(--brand) 28%, rgba(12,21,32,0.25)) !important;
  background:color-mix(in oklab, var(--brand) 15%, #FFFFFF) !important;
}
body.onboarding-body .choice-grid .choice-tile span.label{color:var(--fg) !important;}
body.onboarding-body .choice-grid .choice-tile span.caption{color:var(--fg-2) !important;}
body.onboarding-body .pill-set .pill{
  border:1px solid color-mix(in oklab, var(--brand) 18%, var(--bd-hairline)) !important;
  background:var(--bg-surface) !important;
  color:var(--fg) !important;
}
body.onboarding-body .pill-set .pill.active{
  background:var(--brand) !important;
  border-color:var(--brand) !important;
  color:var(--fg) !important;
  box-shadow:0 14px 36px color-mix(in oklab, var(--brand) 30%, rgba(12,21,32,0.18)) !important;
}
body.onboarding-body .question-card{
  border:1px solid color-mix(in oklab, var(--brand) 18%, var(--bd-hairline)) !important;
  background:var(--bg-surface) !important;
  box-shadow:0 14px 36px rgba(12,21,32,0.08) !important;
}
body.onboarding-body .question-text{color:var(--fg) !important;}
body.onboarding-body .question-actions button{
  border:1px solid color-mix(in oklab, var(--brand) 14%, var(--bd-hairline)) !important;
  background:color-mix(in oklab, var(--bg-surface-2) 92%, white) !important;
  color:color-mix(in oklab, var(--fg) 80%, var(--fg-2)) !important;
}
body.onboarding-body .question-actions button.active{
  background:var(--brand) !important;
  border-color:var(--brand) !important;
  color:var(--fg) !important;
  box-shadow:0 12px 32px color-mix(in oklab, var(--brand) 25%, rgba(12,21,32,0.18));
}
body.onboarding-body .summary-card{
  background:var(--bg-surface) !important;
  border:1px solid color-mix(in oklab, var(--brand) 18%, var(--bd-hairline)) !important;
  box-shadow:0 24px 50px rgba(12,21,32,0.1) !important;
  color:var(--fg) !important;
}
body.onboarding-body .summary-card h3{color:var(--fg) !important;}
body.onboarding-body .summary-card ul{color:var(--fg-2) !important;}
body.onboarding-body .plan-toggle{
  border:1px solid color-mix(in oklab, var(--brand) 20%, var(--bd-hairline)) !important;
  background:color-mix(in oklab, var(--brand) 10%, var(--bg-surface)) !important;
}
body.onboarding-body .plan-toggle button{color:color-mix(in oklab, var(--fg) 78%, var(--fg-2)) !important;}
body.onboarding-body .plan-toggle button.active{
  background:var(--bg-surface) !important;
  color:var(--brand) !important;
  box-shadow:0 10px 28px color-mix(in oklab, var(--brand) 26%, rgba(12,21,32,0.2)) !important;
}
body.onboarding-body .plan-grid .plan-card{
  border:2px solid color-mix(in oklab, var(--brand) 12%, var(--bd-hairline)) !important;
  background:var(--bg-surface) !important;
  box-shadow:0 20px 44px rgba(12,21,32,0.09) !important;
}
body.onboarding-body .plan-grid .plan-card.active{
  border-color:var(--brand) !important;
  box-shadow:0 28px 60px color-mix(in oklab, var(--brand) 28%, rgba(12,21,32,0.22)) !important;
  background:color-mix(in oklab, var(--brand) 12%, #FFFFFF) !important;
}
body.onboarding-body .plan-grid .plan-card .plan-price{color:color-mix(in oklab, var(--fg) 85%, var(--brand) 15%) !important;}
body.onboarding-body .plan-grid .plan-card ul{color:var(--fg-2) !important;}
body.onboarding-body .billing-form{
  background:color-mix(in oklab, var(--bg-surface) 95%, white) !important;
  border:1px solid color-mix(in oklab, var(--brand) 16%, var(--bd-hairline)) !important;
  box-shadow:0 1px 0 rgba(255,255,255,0.6) inset;
}
body.onboarding-body .billing-form label{color:color-mix(in oklab, var(--fg-2) 70%, var(--brand) 25%) !important;}
body.onboarding-body .billing-form input{
  border:1px solid color-mix(in oklab, var(--brand) 14%, var(--bd-hairline)) !important;
  background:var(--bg-surface) !important;
  color:var(--fg) !important;
}
body.onboarding-body .billing-form input:focus{
  border-color:var(--brand) !important;
  box-shadow:0 0 0 3px color-mix(in oklab, var(--brand) 35%, rgba(189,239,231,0.9)) !important;
}
body.onboarding-body .legal-box{
  background:color-mix(in oklab, var(--bg-surface) 94%, white) !important;
  border:1px solid color-mix(in oklab, var(--brand) 12%, var(--bd-hairline)) !important;
  color:var(--fg) !important;
}
body.onboarding-body .step-actions .btn-secondary{
  border:1px solid color-mix(in oklab, var(--brand) 18%, var(--bd-hairline)) !important;
  color:color-mix(in oklab, var(--fg) 78%, var(--fg-2)) !important;
  background:color-mix(in oklab, var(--bg-surface) 92%, white) !important;
}
body.onboarding-body .step-actions .btn-primary{
  background:linear-gradient(135deg,
    color-mix(in oklab, var(--brand) 88%, var(--fg)) 0%,
    color-mix(in oklab, var(--brand-hover) 88%, var(--fg)) 100%) !important;
  color:var(--fg) !important;
  box-shadow:0 18px 42px color-mix(in oklab, var(--brand) 32%, rgba(12,21,32,0.24)) !important;
}
body.onboarding-body .step-actions .btn-primary:not(:disabled):hover{
  box-shadow:0 24px 54px color-mix(in oklab, var(--brand) 36%, rgba(12,21,32,0.28)) !important;
}
body.onboarding-body .alert-banner{
  background:color-mix(in oklab, var(--bg-surface) 95%, white) !important;
  border:1px solid color-mix(in oklab, var(--danger) 35%, white) !important;
  color:color-mix(in oklab, var(--danger) 88%, var(--fg)) !important;
}
body.onboarding-body .onboarding-sidebar a,
body.onboarding-body .onboarding-sidebar strong{color:rgba(255,255,255,0.94) !important;}
body.onboarding-body .onboarding-sidebar .insight-card strong{color:rgba(255,255,255,0.98) !important;}


  
  
  @media (prefers-reduced-motion:reduce){*{transition:none!important}}

  /* ==========================================================================
   CHROME: Topbar + Sidebar (compact icons → expand on hover)
   ========================================================================== */

/* Layout variables */
:root{
  --topbar-h: 56px;
  --sidebar-collapsed: 72px;  /* narrow icon rail */
  --sidebar-expanded: 240px;  /* width on hover */
}

/* Top bar */
.app-topbar{
  position: fixed; inset: 0 0 auto 0;
  height: var(--topbar-h);
  background: color-mix(in oklab, var(--bg-surface) 85%, transparent);
  backdrop-filter: blur(16px);
  border-bottom: 1px solid color-mix(in oklab, var(--bd-hairline) 65%, transparent);
  box-shadow: 0 12px 28px rgba(12,21,32,0.08);
  display: grid;
  grid-template-columns: 56px 1fr 56px; /* burger | center | right */
  align-items: center;
  z-index: 1020;
  transition: background .2s ease, box-shadow .2s ease;
}
.app-topbar::after{
  content:""; position:absolute; inset:0;
  background: linear-gradient(180deg, rgba(255,255,255,0.55), rgba(255,255,255,0));
  pointer-events:none;
}
.topbar-burger{
  margin-left: 8px;
  background: transparent; border: 0; font-size: 1.6rem; line-height: 1;
  color: var(--fg-2);
  transition: color .16s ease, transform .16s ease;
}
.topbar-burger:hover{ color: var(--fg); transform: translateY(-1px); }
.topbar-logo{
  justify-self:center;
  text-decoration:none;
  color:var(--fg);
  font-weight:700;
  letter-spacing:.15px;
}
.topbar-logo .brand-dot{
  --brand-dot-size: 10px;
  box-shadow:0 0 18px color-mix(in oklab, var(--brand) 38%, transparent);
}
.topbar-logo-img{
  height: 42px;
  width: auto;
  display: block;
  border-radius: 12px;
  box-shadow: 0 8px 20px rgba(12, 26, 40, 0.18);
  background: rgba(255,255,255,0.72);
  padding: 4px;
}
.topbar-right{ justify-self: end; padding-right: 8px; }

@media (max-width: 767.98px){
  :root{ --topbar-h: 64px; }
  .app-topbar{
    grid-template-columns: 48px 1fr 48px;
    padding-inline: clamp(0.75rem, 4vw, 1.25rem);
  }
  .topbar-logo{
    font-size:.95rem;
  }
  .topbar-logo-img{
    height: 36px;
    padding: 3px;
  }
}

/* Sidebar container */
.app-sidebar{
  position: fixed; top: var(--topbar-h); left: 0;
  height: calc(100vh - var(--topbar-h));
  width: var(--sidebar-collapsed);
  background: var(--bg-surface);
  border-right: 1px solid var(--bd-hairline);
  box-shadow: var(--shadow);
  display: flex; flex-direction: column;
  overflow: hidden;
  transition: width .18s ease;
  z-index: 1010;
}

/* Expand on hover (desktop only) */
@media (hover:hover){
  .app-sidebar:hover{ width: var(--sidebar-expanded); }
  .app-sidebar:hover .label{ opacity: 1; transform: translateX(0); }
}

/* Navigation items */
.app-nav{
  padding: 8px;
  display: flex;
  flex-direction: column;
  gap: 4px;
  flex: 1 1 auto;
  min-height: 0;
  overflow-y: auto;
  overscroll-behavior: contain;
  scrollbar-gutter: stable both-edges;
}
.app-nav::-webkit-scrollbar{
  width: 8px;
}
.app-nav::-webkit-scrollbar-thumb{
  background: color-mix(in oklab, var(--fg-3) 65%, transparent);
  border-radius: 999px;
}
.app-nav::-webkit-scrollbar-track{
  background: transparent;
}
.app-nav-item{
  display: flex; align-items: center; gap: 12px;
  padding: 10px 12px;
  border-radius: 12px;
  color: var(--fg);
  text-decoration: none;
  transition: background .16s ease, transform .16s ease, box-shadow .16s ease, color .16s ease;
}
.app-nav .nav-icon{
  display: inline-flex;
  align-items: center;
  justify-content: center;
  width: 28px;
  min-width: 28px;
  height: 28px;
  border-radius: 12px;
  transition: background .16s ease, transform .16s ease, box-shadow .16s ease, color .16s ease;
}
.app-nav .nav-icon i{
  font-size: 1.2rem;
  line-height: 1;
  color: var(--fg-2);
  transition: inherit;
}
.app-nav-item .label{
  white-space: nowrap; opacity: 0; transform: translateX(-8px);
  transition: opacity .16s ease, transform .16s ease;
}

@media (max-width: 991.98px){
  .app-nav{ padding: 16px; gap: 8px; }
  .app-nav-item{ padding: 14px 16px; border-radius: 16px; }
  .app-nav .nav-icon i{ font-size: 1.1rem; }
}

/* Active + hover states */
.app-nav-item:hover{
  background: var(--bg-surface-2);
  transform: translateY(-1px);
}
.app-nav-item.active{
  background: color-mix(in oklab, var(--brand) 12%, white);
  color: var(--fg);
  box-shadow: 0 4px 14px color-mix(in oklab, var(--brand) 20%, transparent);
}
.app-nav-item.active .nav-icon i{ color: var(--brand); }

/* Spacer + signout at bottom */
.app-nav-spacer{ flex: 1 1 auto; }
.app-nav-item.signout{ color: var(--danger); }
.app-nav-item.signout .nav-icon i{ color: var(--danger); }

/* Main page content spacing */
body{ padding-top:0; padding-left:0; }
body.has-topbar{ padding-top: var(--topbar-h); }
body.has-sidebar{ padding-left: var(--sidebar-collapsed); }
/* On hover we overlay the expanded sidebar (no content shift). If you prefer pushing content,
   uncomment the rule below to push when expanded:
   .app-sidebar:hover ~ main, .app-sidebar:hover ~ .container { margin-left: calc(var(--sidebar-expanded) - var(--sidebar-collapsed)); }
*/

/* Mobile: sidebar slides over content when open */
@media (max-width: 991.98px){
  body.has-sidebar{ padding-left: 0; }            /* no reserved rail on mobile */
  .app-sidebar{
    transform: translateX(-100%);
    width: var(--sidebar-expanded);   /* open width on mobile */
  }
  body.sidebar-open .app-sidebar{
    transform: translateX(0);
    transition: transform .2s ease;
  }
}

/* Make labels visible when there's enough width (≥ expanded) */
@media (min-width: 992px){
  /* Keep labels hidden by default; they appear on hover (see media above) */
}

/* Icon font (Bootstrap Icons) sizing reset if needed */
.bi{ vertical-align: -0.125em; }

/* Optional: subtle backdrop when sidebar is open on mobile */
@media (max-width: 991.98px){
  body.sidebar-open::after{
    content: ""; position: fixed; inset: var(--topbar-h) 0 0 0; 
    background: rgba(0,0,0,.25); backdrop-filter: blur(1px);
    z-index: 1005;
  }
}

/* ===== Sidebar Section Titles & Dividers ===== */

/* Non-interactive title row */
.app-nav-title{
  display:flex; align-items:center; gap:12px;
  padding:8px 12px; margin-top:6px; margin-bottom:2px;
  color: var(--fg-2);
  font-size:.78rem; font-weight:700; text-transform:uppercase; letter-spacing:.06em;
  pointer-events:none;                 /* not clickable */
  user-select:none;
}

/* Title icon (optional) */
.app-nav-title .nav-icon{
  width: 24px;
  min-width: 24px;
  height: 24px;
}
.app-nav-title .nav-icon i{
  font-size: 1rem;
  color: var(--fg-2);
}

/* Title label reveals on expand (same motion as items) */
.app-nav-title .label{
  white-space:nowrap; opacity:0; transform:translateX(-8px);
  transition:opacity .16s ease, transform .16s ease;
}
@media (hover:hover){
  .app-sidebar:hover .app-nav-title .label{ opacity:1; transform:translateX(0) }
}

/* Hairline divider between sections */
.app-nav-sep{
  height:1px; background:var(--bd-hairline);
  margin:8px 10px;
  border-radius:1px;
  opacity:.9;
}

/* ===========================================================
   SIDEBAR POLISH — icons, titles, and sign-out button
   =========================================================== */

/* --- Icon behavior (items + titles) --- */
.app-nav .nav-icon{
  background: transparent;
}
.app-nav-item:hover .nav-icon,
.app-nav-toggle:hover .nav-icon{
  transform: translateY(-1px);
}
.app-nav-item:hover .nav-icon i,
.app-nav-toggle:hover .nav-icon i{
  color: var(--brand);
}
.app-nav-item.active .nav-icon i{
  color: var(--brand);
}

/* Label reveal behavior (collapsed: just icons; hover to show labels) */
.app-sidebar .label{ opacity:0; transform:translateX(-8px); white-space:nowrap; transition:opacity .16s ease, transform .16s ease; }
@media (hover:hover){
  .app-sidebar:hover .label{ opacity:1; transform:translateX(0); }
}

/* Hairline dividers between sections */
.app-nav-sep{
  height:1px; background:var(--bd-hairline);
  margin:8px 10px; border-radius:1px; opacity:.9;
}

.app-nav-section{
  position:relative;
}

.app-nav-items{
  display:flex;
  flex-direction:column;
  gap:0;
}

.app-nav-toggle{
  pointer-events:auto;
  cursor:pointer;
  width:100%;
  border:0;
  background:transparent;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:8px 12px;
  margin-top:6px;
  margin-bottom:2px;
  color:var(--fg-2);
  font-size:.78rem;
  font-weight:700;
  text-transform:uppercase;
  letter-spacing:.06em;
  text-align:left;
  user-select:none;
}

.app-nav-toggle .app-nav-title-content{
  display:flex;
  align-items:center;
  gap:12px;
}

.app-nav-toggle .label{
  white-space:nowrap;
}

.app-nav-toggle-icon{
  margin-left:auto;
  transition:transform .18s ease;
  color:var(--fg-3, var(--fg-2));
  width:auto;
  min-width:unset;
  font-size:.95rem;
}

.app-nav-section[data-expanded="false"] .app-nav-toggle-icon{
  transform:rotate(-90deg);
}

.app-nav-section[data-expanded="false"] .app-nav-items{
  display:none;
}

.app-nav-toggle:focus-visible{
  outline:2px solid var(--brand);
  outline-offset:-2px;
}

/* Active item highlight (subtle brand tint + vertical bar) */
.app-nav-item{ position: relative; }
.app-nav-item.active{
  background: color-mix(in oklab, var(--brand) 10%, var(--bg-surface));
  box-shadow: 0 4px 14px color-mix(in oklab, var(--brand) 18%, transparent);
}
.app-nav-item.active::before{
  content:""; position:absolute; left:6px; top:8px; bottom:8px; width:3px;
  background: var(--brand); border-radius: 2px;
}

/* --- Sign out (bottom) — on-theme, sleek danger treatment --- */
.app-nav-item.signout{
  position: relative;
  margin: 8px;               /* pulls it in from the rail edge */
  margin-top: 4px;
  padding: 10px 12px;
  background: color-mix(in oklab, var(--danger) 6%, var(--bg-surface));
  border: 1px solid color-mix(in oklab, var(--danger) 18%, var(--bd-hairline));
  color: var(--danger);
  box-shadow: 0 6px 16px color-mix(in oklab, var(--danger) 12%, transparent);
  border-radius: 12px;       /* same radius as other items */
}
.app-nav-item.signout .nav-icon i{ color: var(--danger); }
.app-nav-item.signout:hover{
  background: color-mix(in oklab, var(--danger) 12%, var(--bg-surface));
  transform: translateY(-1px);
}
.app-nav-item.signout:active{ transform: translateY(0); }

/* Subtle top divider “above” the signout area */
.app-nav-item.signout::before{
  content:""; position:absolute; left:-8px; right:-8px; top:-12px; height:1px;
  background: var(--bd-hairline); border-radius:1px; opacity:.9;
}

/* Keyboard focus (clean, accessible ring) */
.app-nav-item:focus-visible{
  outline: none;
  box-shadow: 0 0 0 3px var(--focus);
}

/* Optional: slightly lighter hover for standard items to match the signout feel */
.app-nav-item:hover{
  background: var(--bg-surface-2);
  transform: translateY(-1px);
}
.app-nav-item:active{ transform: translateY(0); }

/* ===========================================================
   SIDEBAR — Collapsed icon rail refresh
   Keeps icons visible & centered when collapsed; labels reveal on hover.
   Works with the existing hover-to-expand behavior.
   =========================================================== */

.app-sidebar:not(:hover){
  --collapsed-icon-shell: 44px;
}

.app-sidebar:not(:hover) .app-nav-title,
.app-sidebar:not(:hover) .app-nav-toggle,
.app-sidebar:not(:hover) .app-nav-item{
  justify-content: center;
  gap: 0;
}

.app-sidebar:not(:hover) .app-nav-item{ padding: 10px 0; }
.app-sidebar:not(:hover) .app-nav-title{ padding: 6px 0; }
.app-sidebar:not(:hover) .app-nav-heading{ margin-bottom: 6px; }

.app-sidebar:not(:hover) .app-nav-toggle .app-nav-title-content{
  justify-content: center;
}

.app-sidebar:not(:hover) .app-nav-toggle-icon{ display: none; }

.app-sidebar:not(:hover) .label{
  width: 0;
  opacity: 0;
  transform: translateX(-8px);
  overflow: hidden;
  white-space: nowrap;
  pointer-events: none;
}

.app-sidebar:not(:hover) .nav-icon{
  width: var(--collapsed-icon-shell);
  min-width: var(--collapsed-icon-shell);
  height: var(--collapsed-icon-shell);
  border-radius: 16px;
  background: color-mix(in oklab, var(--bg-surface-2) 94%, transparent);
  box-shadow: 0 14px 30px rgba(12,21,32,0.14);
}

.app-sidebar:not(:hover) .app-nav-title .nav-icon{
  background: color-mix(in oklab, var(--fg-2) 12%, transparent);
  box-shadow: none;
}

.app-sidebar:not(:hover) .nav-icon i{
  color: var(--fg);
  font-size: 1.25rem;
}

.app-sidebar:not(:hover) .app-nav-title .nav-icon i{
  color: var(--fg-2);
  font-size: 1.15rem;
}

.app-sidebar:not(:hover) .app-nav-item,
.app-sidebar:not(:hover) .app-nav-item:hover,
.app-sidebar:not(:hover) .app-nav-item:active{
  background: transparent;
  box-shadow: none;
}

.app-sidebar:not(:hover) .app-nav-item:hover .nav-icon,
.app-sidebar:not(:hover) .app-nav-toggle:hover .nav-icon{
  transform: translateY(-2px);
  box-shadow: 0 18px 34px rgba(12,21,32,0.18);
}

.app-sidebar:not(:hover) .app-nav-item:hover .nav-icon i,
.app-sidebar:not(:hover) .app-nav-toggle:hover .nav-icon i{
  color: var(--brand);
}

.app-sidebar:not(:hover) .app-nav-item.active .nav-icon{
  background: color-mix(in oklab, var(--brand) 24%, white);
  box-shadow: 0 20px 34px color-mix(in oklab, var(--brand) 28%, transparent);
}

.app-sidebar:not(:hover) .app-nav-item.active .nav-icon i{
  color: color-mix(in oklab, var(--brand) 92%, #0b3d34);
}

.app-sidebar:not(:hover) .app-nav-item.active::before{
  left: 50%;
  top: auto;
  bottom: 6px;
  width: 8px;
  height: 8px;
  border-radius: 999px;
  transform: translateX(-50%);
}

.app-sidebar:not(:hover) .app-nav-sep{
  margin: 10px 22px;
}

.app-sidebar:not(:hover) .app-nav-item.signout{
  padding: 10px 0;
  background: transparent;
  border: 0;
  box-shadow: none;
  margin-inline: 8px;
}

.app-sidebar:not(:hover) .app-nav-item.signout::before{ display: none; }

.app-sidebar:not(:hover) .app-nav-item.signout .nav-icon{
  background: color-mix(in oklab, var(--danger) 20%, white);
  box-shadow: 0 18px 34px color-mix(in oklab, var(--danger) 28%, transparent);
}

.app-sidebar:not(:hover) .app-nav-item.signout .nav-icon i{
  color: var(--danger);
}

/* Labels reveal on expand (already handled elsewhere); keep the transition smooth */
.app-sidebar .label{
  transition: opacity .16s ease, transform .16s ease, width .16s ease;
}

/* === Upload button inline spinner overlay (on-theme, subtle) === */
#uploadBtn {
  position: relative;
  overflow: hidden;
}

/* Loading state toggled by JS */
#uploadBtn.btn-is-loading {
  pointer-events: none;
  opacity: .9;
}

/* The overlay that gently covers the button while uploading */
#uploadBtn.btn-is-loading::after {
  content: "";
  position: absolute;
  inset: 0;
  background: color-mix(in oklab, var(--bg-surface) 70%, white);
  /* slight blur for a modern feel */
  backdrop-filter: blur(2px);
}

/* The spinner “wheel” centered on the button */
#uploadBtn.btn-is-loading::before {
  content: "";
  position: absolute;
  inset: 0;
  margin: auto;
  width: 20px; height: 20px;
  border-radius: 50%;
  border: 2px solid color-mix(in oklab, var(--brand) 20%, var(--bd-hairline));
  border-top-color: var(--brand);
  animation: btnspin .8s linear infinite;
  z-index: 1;
}

@keyframes btnspin { to { transform: rotate(360deg); } }

/* (Optional) small progress text in the bottom-right of the button */
#uploadBtn .btn-progress-pct {
  position: absolute; right: 8px; bottom: 6px;
  font-size: .75rem; font-weight: 600; color: var(--fg-2);
  pointer-events: none; user-select: none;
  opacity: 0; transition: opacity .15s ease;
}
#uploadBtn.btn-show-pct .btn-progress-pct { opacity: 1; }

/* Card-top progress bar (2px) */
.card-uploading {
  position: relative;
}
.card-uploading::before {
  content:""; position:absolute; left:0; top:0; height:2px; width: var(--upload-w, 0%);
  background: var(--brand); border-radius: 2px 2px 0 0;
  box-shadow: 0 2px 10px color-mix(in oklab, var(--brand) 30%, transparent);
  transition: width .15s ease;
}

/* ===========================================================
   Documents: Upload UI polish
   - Spinner overlay on the clicked Upload button
   - Thin progress bar across the top of the table region
   =========================================================== */

/* Row upload button inline spinner overlay (generic, no IDs needed) */
.btn[data-action="upload"] { position: relative; overflow: hidden; }

.btn[data-action="upload"].is-loading {
  pointer-events: none;
  opacity: .9;
}
.btn[data-action="upload"].is-loading::after {
  content: "";
  position: absolute; inset: 0;
  background: color-mix(in oklab, var(--bg-surface) 70%, white);
  backdrop-filter: blur(2px);
}
.btn[data-action="upload"].is-loading::before {
  content: "";
  position: absolute; inset: 0; margin: auto;
  width: 20px; height: 20px; border-radius: 50%;
  border: 2px solid color-mix(in oklab, var(--brand) 20%, var(--bd-hairline));
  border-top-color: var(--brand);
  animation: btnspin .8s linear infinite;
  z-index: 1;
}
@keyframes btnspin { to { transform: rotate(360deg); } }

/* Thin progress bar across the top of the table wrapper */
.table-uploading { position: relative; }
.table-uploading::before {
  content:"";
  position:absolute; left:0; top:0; height:2px; width: var(--upload-w, 0%);
  background: var(--brand);
  border-radius: 2px 2px 0 0;
  box-shadow: 0 2px 10px color-mix(in oklab, var(--brand) 30%, transparent);
  transition: width .15s ease;
}
/* Icon-only buttons: perfect square, centered icon */
.btn-icon{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  width: 34px;       /* matches .btn-sm height nicely */
  height: 34px;
  padding: 0;        /* no extra padding */
}
.btn-icon i{
  font-size: 1rem;   /* tweak if you prefer larger/smaller icons */
  line-height: 1;
}

/* ---------------- Dashboard v2 layout ---------------- */
.dashboard-section{ margin-bottom: 2rem; }
.dashboard-section .card{ border-radius: 1.25rem; }
.dashboard-section .card-header{
  background: var(--bg-surface);
  border-bottom: 1px solid var(--bd-hairline);
}
.dashboard-section .card-header .section-subtitle{
  color: var(--fg-2);
  font-size: .9rem;
}
.section-toggle{ transition: transform .2s ease; }
.section-toggle .bi{ transition: transform .2s ease; }
.section-toggle[aria-expanded="false"] .bi,
.section-toggle.collapsed .bi{ transform: rotate(180deg); }
.chart-wrapper{ position: relative; min-height: 180px; display:flex; align-items:center; justify-content:center; }
.chart-wrapper canvas{ width:100% !important; height:100% !important; }
.stat-tile{
  border:1px solid var(--bd-hairline);
  border-radius:1rem;
  padding:.75rem 1rem;
  background:var(--bg-surface-2);
  height:100%;
}
.stat-tile .fw-semibold{ font-size:1rem; }
.dashboard-section .table thead{ font-size:.85rem; }
.dashboard-section .table tbody td{ vertical-align:middle; }
.section-subtitle{ color:var(--fg-2); }
.section-subtitle small{ color:inherit; }
.dashboard-section .badge{text-transform:none; }
.dashboard-section .card-title{ font-weight:600; }
.dashboard-section .card-body p.text-muted{ color:var(--fg-3)!important; }

/* ===================== Billing Cycle Toggle (smaller) ===================== */
:root {
  --toggle-accent: var(--brand, var(--bs-success, #198754));
  --toggle-fg: var(--fg-2, #6c757d);
  --toggle-bg: var(--bg-surface, #ffffff);
  --toggle-border: color-mix(in oklab, var(--toggle-accent) 80%, #0000);
}

.billing-toggle {
  display: flex;
  justify-content: flex-end;
}

/* Smaller, sleeker container */
.billing-toggle__inner {
  position: relative;
  display: grid;
  grid-template-columns: 1fr 1fr;
  align-items: center;
  isolation: isolate;
  width: 260px;                 /* was 320px */
  min-height: 38px;             /* was 44px */
  background: var(--toggle-bg);
  border: 2px solid var(--toggle-border);
  border-radius: 9999px;
  box-shadow: 0 1px 6px rgba(0,0,0,.06), inset 0 0 0 1px rgba(0,0,0,.03);
  padding: 2px;                 /* was 3px */
}

.billing-toggle__option {
  position: relative;
  z-index: 1;
  text-align: center;
  padding: 6px 8px;             /* was 8px 10px */
  font-weight: 600;
  font-size: 0.9rem;            /* was 0.95rem */
  line-height: 1.1;
  color: var(--toggle-fg);
  cursor: pointer;
  user-select: none;
  transition: color .18s ease, transform .18s ease;
}
.billing-toggle__option:hover { transform: translateY(-1px); }

/* Move the "Save 10–15%" under 'Yearly' */
.billing-toggle__option .save {
  display: block;               /* forces a new line */
  margin-top: 2px;
  font-size: 0.72rem;           /* slightly smaller */
  font-weight: 700;
  line-height: 1;
  padding: .12rem .35rem;
  border-radius: .4rem;
  margin-left: auto;            /* center within label */
  margin-right: auto;
  background: color-mix(in oklab, var(--toggle-accent) 12%, #fff);
  color: color-mix(in oklab, var(--toggle-accent) 85%, #000);
}

/* The moving pill (smaller to match container) */
.billing-toggle__knob {
  position: absolute;
  top: 2px;                     /* was 3px */
  bottom: 2px;                  /* was 3px */
  left: 2px;                    /* was 3px */
  width: calc(50% - 4px);       /* was calc(50% - 6px) */
  border-radius: 9999px;
  background: var(--toggle-accent);
  box-shadow:
    inset 0 -1px 0 rgba(0,0,0,.12),
    0 4px 14px color-mix(in oklab, var(--toggle-accent) 40%, transparent);
  transition: transform .22s cubic-bezier(.2,.8,.2,1), box-shadow .22s ease;
  z-index: 0;
}

.billing-toggle__inner:focus-within {
  box-shadow:
    0 1px 8px rgba(0,0,0,.08),
    0 0 0 4px color-mix(in oklab, var(--toggle-accent) 20%, transparent);
}

/* Checked state: move knob + white active text */
#cycle-monthly:checked ~ .billing-toggle__inner .billing-toggle__knob { transform: translateX(0%); }
#cycle-yearly:checked  ~ .billing-toggle__inner .billing-toggle__knob { transform: translateX(100%); }

#cycle-monthly:checked ~ .billing-toggle__inner .opt-month { color: #fff; }
#cycle-yearly:checked  ~ .billing-toggle__inner .opt-year  { color: #fff; }

/* Keyboard focus */
#cycle-monthly:focus-visible + #cycle-yearly + .billing-toggle__inner,
#cycle-yearly:focus-visible  ~ .billing-toggle__inner {
  outline: none;
  box-shadow:
    0 1px 8px rgba(0,0,0,.08),
    0 0 0 4px color-mix(in oklab, var(--toggle-accent) 25%, transparent);
}

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .billing-toggle__option,
  .billing-toggle__knob { transition: none !important; }
}

.viewer__file-alert {
  margin: 12px 0 0;
  padding: 12px 14px;
  border-radius: 12px;
  background: rgba(253, 186, 116, 0.22);
  border: 1px solid rgba(234, 88, 12, 0.32);
  font-size: 0.9rem;
  color: rgba(120, 53, 15, 0.95);
  display: flex;
  flex-direction: column;
  gap: 6px;
}

.viewer__file-alert strong {
  font-weight: 600;
}


  
  
a.theme-toggle-link{color:inherit;text-decoration:none;}

.theme-toggle{
  --toggle-track-width:56px;
  --toggle-track-height:28px;
  --toggle-thumb-offset:3px;
  --toggle-thumb-size:calc(var(--toggle-track-height) - var(--toggle-thumb-offset) * 2);
  --toggle-thumb-shift:calc(var(--toggle-track-width) - var(--toggle-thumb-size) - var(--toggle-thumb-offset) * 2);
  position:relative;
  display:inline-flex;
  align-items:center;
  gap:.65rem;
  padding:0.4rem 0.85rem 0.4rem 0.5rem;
  border-radius:999px;
  border:1px solid color-mix(in srgb, var(--bd-hairline) 70%, transparent);
  background:linear-gradient(160deg, color-mix(in srgb, var(--bg-surface) 92%, transparent), color-mix(in srgb, var(--bg-surface-2) 86%, transparent));
  color:var(--fg-2);
  font-size:.8rem;
  font-weight:600;
  letter-spacing:.12em;
  text-transform:uppercase;
  cursor:pointer;
  box-shadow:0 14px 34px rgba(4,24,24,0.14);
  backdrop-filter:blur(calc(var(--surface-blur) * 0.35));
  transition:background .3s ease, border-color .3s ease, color .3s ease, box-shadow .3s ease;
}
.theme-toggle::after{
  content:"";
  position:absolute;
  inset:0;
  border-radius:inherit;
  pointer-events:none;
  opacity:0;
  background:radial-gradient(circle at center, color-mix(in srgb, var(--brand) 18%, transparent) 0%, transparent 70%);
  transition:opacity .3s ease;
}
.theme-toggle:focus-visible{
  outline:3px solid var(--focus);
  outline-offset:3px;
}
.theme-toggle:hover{
  color:var(--fg);
  border-color:color-mix(in srgb, var(--bd-hairline) 90%, transparent);
  box-shadow:0 20px 40px rgba(4,24,24,0.18);
}
.theme-toggle:hover::after{ opacity:1; }
.theme-toggle__track{
  position:relative;
  display:block;
  width:var(--toggle-track-width);
  height:var(--toggle-track-height);
  border-radius:var(--toggle-track-height);
  border:1px solid color-mix(in srgb, var(--bd-hairline) 68%, transparent);
  background:linear-gradient(150deg, color-mix(in srgb, var(--bg-surface) 90%, transparent), color-mix(in srgb, var(--bg-surface-2) 82%, transparent));
  box-shadow:inset 0 0 0 1px color-mix(in srgb, var(--bg-surface) 52%, transparent);
}
.theme-toggle__thumb{
  position:absolute;
  top:var(--toggle-thumb-offset);
  left:var(--toggle-thumb-offset);
  width:var(--toggle-thumb-size);
  height:var(--toggle-thumb-size);
  border-radius:50%;
  background:linear-gradient(145deg, rgba(255,255,255,0.96), color-mix(in srgb, var(--bg-surface) 85%, rgba(255,255,255,0.7)));
  box-shadow:0 10px 24px rgba(4,24,24,0.18), var(--glow);
  transition:transform .28s cubic-bezier(.2,.8,.25,1), background .28s ease, box-shadow .28s ease;
}
.theme-toggle__icon{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  font-size:.95rem;
  transition:opacity .28s ease, transform .28s ease, color .28s ease;
}
.theme-toggle__icon--sun{ left:9px; color:color-mix(in srgb, var(--brand) 20%, var(--fg)); opacity:1; }
.theme-toggle__icon--moon{ right:9px; color:color-mix(in srgb, var(--brand) 18%, var(--fg-2)); opacity:.35; transform:translateY(-50%) scale(.88); }
.theme-toggle__label{
  display:inline-flex;
  align-items:center;
  gap:.25rem;
}
.theme-toggle [data-theme-toggle-label]{
  color:var(--fg-2);
  transition:color .3s ease;
}
.theme-toggle--compact{
  --toggle-track-width:48px;
  --toggle-track-height:24px;
  padding:0.3rem 0.45rem;
}
.theme-toggle--compact .theme-toggle__label{ display:none; }

.theme-toggle[data-theme-state="dark"] .theme-toggle__thumb{
  transform:translateX(var(--toggle-thumb-shift));
}
.theme-toggle[data-theme-state="dark"] .theme-toggle__icon--sun{
  opacity:.22;
  color:color-mix(in srgb, var(--fg-3) 80%, var(--brand) 20%);
  transform:translate(-2px,-50%) scale(.85);
}
.theme-toggle[data-theme-state="dark"] .theme-toggle__icon--moon{
  opacity:1;
  color:var(--brand-strong);
  transform:translate(0,-50%) scale(1);
}
.theme-toggle[data-theme-state="dark"] [data-theme-toggle-label]{
  color:color-mix(in srgb, var(--brand) 28%, var(--fg-2));
}

html[data-theme="dark"] .theme-toggle{
  background:linear-gradient(160deg, color-mix(in srgb, var(--bg-surface) 78%, rgba(0,0,0,0.6)), color-mix(in srgb, var(--bg-surface-2) 72%, rgba(0,0,0,0.55)));
  border-color:color-mix(in srgb, var(--bd-strong) 70%, transparent);
  color:color-mix(in srgb, var(--brand) 24%, var(--fg-2));
  box-shadow:0 18px 42px rgba(0,0,0,0.45);
}
html[data-theme="dark"] .theme-toggle__track{
  background:linear-gradient(150deg, color-mix(in srgb, var(--bg-surface-2) 70%, rgba(0,0,0,0.55)), color-mix(in srgb, var(--bg-surface-3) 68%, rgba(0,0,0,0.6)));
  border-color:color-mix(in srgb, var(--bd-strong) 65%, transparent);
  box-shadow:inset 0 0 0 1px color-mix(in srgb, var(--bg-surface-3) 52%, rgba(0,0,0,0.55));
}
html[data-theme="dark"] .theme-toggle__thumb{
  background:linear-gradient(145deg, color-mix(in srgb, var(--brand) 18%, rgba(255,255,255,0.35)), color-mix(in srgb, var(--brand-strong) 46%, rgba(0,0,0,0.35)));
  box-shadow:0 12px 28px rgba(0,0,0,0.5), var(--glow);
}
html[data-theme="dark"] .theme-toggle__icon--sun{
  opacity:.25;
  color:color-mix(in srgb, var(--fg-3) 78%, var(--brand) 22%);
}
html[data-theme="dark"] .theme-toggle__icon--moon{
  opacity:1;
  color:var(--brand-strong);
}
html[data-theme="dark"] .theme-toggle:not([data-theme-state]) .theme-toggle__thumb{
  transform:translateX(var(--toggle-thumb-shift));
}
html[data-theme="dark"] .theme-toggle[data-theme-state="dark"] .theme-toggle__thumb{
  transform:translateX(var(--toggle-thumb-shift));
}
html[data-theme="dark"] .theme-toggle[data-theme-state="dark"] .theme-toggle__icon--moon{
  transform:translate(0,-50%) scale(1.05);
}
html[data-theme="dark"] .theme-toggle[data-theme-state="dark"] [data-theme-toggle-label]{
  color:color-mix(in srgb, var(--brand-strong) 32%, var(--fg-2));
}
.standalone-theme-toggle{
  position:fixed;
  top:calc(1rem + env(safe-area-inset-top));
  right:calc(1rem + env(safe-area-inset-right));
  z-index:1600;
  display:flex;
  align-items:flex-start;
  justify-content:flex-end;
  pointer-events:none;
}
.standalone-theme-toggle .theme-toggle{
  pointer-events:auto;
  box-shadow:0 18px 40px rgba(4,24,24,0.18);
}
.standalone-theme-toggle .theme-toggle.theme-toggle--compact{
  padding:0.35rem 0.45rem;
}

.suite-body {
  background: var(--bg-body);
  color: var(--fg);
  min-height: 100vh;
}

.suite-topbar {
  position: sticky;
  top: 0;
  z-index: 1100;
  backdrop-filter: saturate(1.2) blur(18px);
  border-bottom: 1px solid color-mix(in srgb, var(--bd-hairline) 75%, transparent);
}

.suite-layout {
  display: flex;
  gap: 1.5rem;
  align-items: flex-start;
  padding: clamp(1.5rem, 5vw, 2.5rem);
}

.suite-nav {
  position: sticky;
  top: calc(var(--topbar-h, 70px) + 1rem);
  height: calc(100vh - var(--topbar-h, 70px) - 2rem);
  overflow-y: auto;
  border-radius: 20px;
  background: var(--bg-surface);
  box-shadow: 0 20px 45px rgba(8, 24, 32, 0.12);
  border: 1px solid var(--bd-hairline);
  padding: 1rem;
  min-width: min(260px, 25vw);
}

.suite-main {
  flex: 1 1 auto;
  width: 100%;
  max-width: 1100px;
}

.suite-section + .suite-section {
  margin-top: clamp(2.5rem, 6vw, 3.5rem);
}

.suite-section-header {
  margin-bottom: 1.5rem;
}

.suite-section-title {
  font-size: clamp(1.6rem, 3vw, 2.15rem);
  margin-bottom: 0.25rem;
}

.suite-section-subtitle {
  max-width: 720px;
}

.suite-card {
  border-radius: 20px;
  border: 1px solid var(--bd-hairline);
  background: var(--bg-surface);
  box-shadow: var(--shadow, 0 18px 32px rgba(10, 24, 36, 0.08));
}

.suite-dropzone {
  border: 2px dashed color-mix(in srgb, var(--bd) 75%, transparent);
  border-radius: 18px;
  padding: clamp(1.75rem, 4vw, 2.75rem);
  background: color-mix(in srgb, var(--bg-surface-2) 55%, transparent);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: border-color 0.2s ease, background 0.2s ease, transform 0.2s ease;
}

.suite-dropzone:hover,
.suite-dropzone.dragover {
  border-color: color-mix(in srgb, var(--brand) 60%, transparent);
  background: color-mix(in srgb, var(--brand) 12%, transparent);
  transform: translateY(-1px);
}

.suite-dropzone-icon {
  width: 72px;
  height: 72px;
  background: color-mix(in srgb, var(--brand) 14%, white);
  color: var(--brand);
}

.suite-upload-queue {
  margin-top: 1.5rem;
  display: grid;
  gap: 0.75rem;
}

.suite-upload-item {
  padding: 0.85rem 1rem;
  border-radius: 14px;
  background: var(--bg-surface-2);
  border: 1px solid color-mix(in srgb, var(--bd-hairline) 70%, transparent);
}

.suite-upload-item.is-error {
  border-color: var(--danger);
  background: color-mix(in srgb, var(--danger) 10%, var(--bg-surface-2));
}

.suite-status-chips .badge {
  font-weight: 500;
  letter-spacing: 0.01em;
}

.suite-empty-state {
  padding: 2.5rem 1.5rem;
  text-align: center;
  color: var(--fg-2);
}

.suite-empty-state i {
  font-size: 2.25rem;
  margin-bottom: 0.75rem;
  color: color-mix(in srgb, var(--brand) 45%, var(--fg-3));
}

.suite-ribbon {
  border-radius: 18px;
  border: 1px solid color-mix(in srgb, var(--bd-hairline) 70%, transparent);
  background: linear-gradient(130deg,
    color-mix(in srgb, var(--bg-surface) 90%, transparent),
    color-mix(in srgb, var(--bg-surface-2) 80%, transparent));
  padding: 1.25rem;
  margin-bottom: 2rem;
}

.suite-ribbon-inner {
  display: grid;
  gap: 1rem;
  grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
}

.suite-ribbon-item {
  padding: 1rem;
  border-radius: 14px;
  background: var(--bg-surface);
  border: 1px solid color-mix(in srgb, var(--bd-hairline) 65%, transparent);
}

.suite-kpi-icon {
  width: 42px;
  height: 42px;
  border-radius: 12px;
  background: color-mix(in srgb, var(--brand) 18%, transparent);
  color: var(--brand);
  display: inline-flex;
  align-items: center;
  justify-content: center;
}

.suite-loading {
  padding: 1.25rem 0 1.5rem;
}

.suite-placeholder-tile,
.suite-placeholder-panel {
  border-radius: 18px;
  background: color-mix(in srgb, var(--bg-surface-2) 65%, transparent);
  border: 1px solid color-mix(in srgb, var(--bd-hairline) 70%, transparent);
  min-height: 120px;
}

.suite-placeholder-panel {
  min-height: 220px;
}

.suite-preview-frame {
  width: 100%;
  min-height: min(70vh, 720px);
  border: 0;
  border-radius: 12px;
  background: color-mix(in srgb, var(--bg-surface-2) 50%, transparent);
}

@media (max-width: 1199.98px) {
  .suite-layout {
    flex-direction: column;
  }
  .suite-nav {
    position: relative;
    top: auto;
    height: auto;
    width: 100%;
    min-width: 0;
    order: 1;
  }
  .suite-main {
    order: 2;
  }
}

@media (max-width: 767.98px) {
  .suite-layout {
    padding: 1rem;
  }
  .suite-section-title {
    font-size: 1.5rem;
  }
  .suite-card {
    border-radius: 16px;
  }
}

/* Landing page */
.landing-page {
  background-color: var(--bs-body-bg);
}

.landing-header .navbar-brand {
  font-weight: 600;
  display: inline-flex;
  align-items: center;
  gap: 0.5rem;
  font-size: 1.2rem;
}

.landing-nav .nav-link {
  color: inherit;
  font-weight: 500;
}

.landing-nav .nav-link:hover,
.landing-nav .nav-link:focus {
  color: var(--bs-primary);
  text-decoration: none;
}

.landing-hero-visual {
  background: radial-gradient(circle at top left, rgba(59, 130, 246, 0.12), transparent 60%),
              radial-gradient(circle at bottom right, rgba(99, 102, 241, 0.15), transparent 55%),
              var(--bs-body-bg);
}

.landing-hero-placeholder {
  padding: 2rem;
  background: rgba(15, 23, 42, 0.02);
  backdrop-filter: blur(2px);
}

.landing-card {
  border-radius: var(--bs-border-radius-lg);
}

.icon-circle {
  width: 3rem;
  height: 3rem;
  border-radius: 50%;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  font-size: 1.5rem;
  background: rgba(59, 130, 246, 0.12);
  color: var(--bs-primary);
}

.landing-footer .link-muted {
  color: inherit;
  text-decoration: none;
}

.landing-footer .link-muted:hover,
.landing-footer .link-muted:focus {
  color: var(--bs-primary);
}

details.preferred-doc > summary {
  border-color: rgba(103, 89, 255, 0.35);
  background: rgba(103, 89, 255, 0.06);
}
