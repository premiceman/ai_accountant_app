// backend/data/vaultCatalogue.js
// Canonical catalogue of UK tax documents (required + helpful) for vault integrations.
// Shared between dashboard tooling and Scenario Lab document picker.

const DOCS = [
  { key: 'proof_of_id',         label: 'Proof of ID',                                 cadence:{months:60},  why:'Verify identity (KYC/AML), protect account changes.', where:'Passport or DVLA Driving Licence.',                          required:true,  aliases:['passport','driving licence','driver licence','proof of id'] },
  { key: 'proof_of_address',    label: 'Proof of Address',                            cadence:{months:6},   why:'Confirm UK residency for tax and correspondence.',     where:'Recent utility bill, bank/credit statement, council tax.',    required:true,  aliases:['utility bill','bank statement','proof of address'] },
  { key: 'sa100_return_copy',   label: 'SA100 Self Assessment (copy)',                cadence:{yearlyBy:'01-31'}, why:'Record of filed return; carry-forwards, audit.',   where:'HMRC online â†’ Self Assessment.',                               required:true,  aliases:['sa100','self assessment'] },
  { key: 'sa302_tax_calc',      label: 'SA302 / Tax Calculation',                     cadence:{yearlyBy:'01-31'}, why:'Official calculation; supports mortgages/audit.',  where:'HMRC online â†’ SA tax calculation.',                             required:true,  aliases:['sa302','tax calculation'] },
  { key: 'hmrc_statement',      label: 'HMRC Statement of Account',                   cadence:{yearlyBy:'01-31'}, why:'Shows balancing payment & payments on account.',    where:'HMRC online â†’ SA account.',                                     required:true,  aliases:['statement of account','hmrc statement'] },
  { key: 'p60',                 label: 'P60 End of Year Certificate',                 cadence:{yearlyBy:'06-01'}, why:'Summary of pay & tax; essential for SA.',          where:'Employer/Payroll portal (by 31 May).',                         required:true,  aliases:['p60'] },
  { key: 'p11d',                label: 'P11D Benefits in Kind',                       cadence:{yearlyBy:'07-06'}, why:'Taxable benefits (car, medical, etc.).',           where:'Employer/Payroll portal (by 6 July).',                         required:true,  aliases:['p11d'] },
  { key: 'p45',                 label: 'P45 (leaver\'s certificate)',                 cadence:{adhoc:true},        why:'Pay/tax to date when leaving a job.',            where:'Provided by former employer.',                                  required:false, aliases:['p45'] },
  { key: 'payslips',            label: 'Payslips (monthly)',                          cadence:{months:1},          why:'Reconcile vs bank & P60/P11D.',                  where:'Employer/Payroll portal.',                                      required:false, aliases:['payslip'] },
  { key: 'pension_statement',   label: 'Pension Annual Statement (SIPP/Workplace)',   cadence:{yearlyBy:'06-30'},  why:'Tracks contributions (PIA) vs Annual Allowance.', where:'Pension provider portal/annual pack.',                          required:true,  aliases:['pension statement'] },
  { key: 'pension_pia',         label: 'Pension Input Amounts (last 3 years)',        cadence:{yearlyBy:'06-30'},  why:'Needed for carry-forward and AA charges.',        where:'Pension schemes provide PIA per tax year.',                     required:true,  aliases:['pia','pension input amount'] },
  { key: 'isa_statement',       label: 'ISA Annual Statement',                        cadence:{yearlyBy:'05-31'},  why:'Evidence of ISA subscriptions/limits.',           where:'ISA provider annual statement.',                                required:false, aliases:['isa statement'] },
  { key: 'interest_certs',      label: 'Bank/Building Society Interest Certificates', cadence:{yearlyBy:'06-30'},  why:'Declare savings interest beyond PSA.',            where:'Bank portals (tax certificates) or statements.',                required:true,  aliases:['interest certificate','tax certificate'] },
  { key: 'dividend_vouchers',   label: 'Dividend Vouchers',                           cadence:{months:12},         why:'Evidence of dividend income & withholding.',     where:'Broker portal or registrar.',                                   required:true,  aliases:['dividend voucher'] },
  { key: 'broker_tax_pack',     label: 'Broker Annual Tax Pack / CTC',                cadence:{yearlyBy:'06-30'},  why:'Summarises dividends, interest & disposals.',    where:'Broker portal (HL, AJ Bell, IBKR, etc.).',                      required:true,  aliases:['tax pack','ctc','consolidated tax certificate'] },
  { key: 'trade_confirmations', label: 'Trade Confirmations / Contract Notes',        cadence:{months:1},          why:'Evidence of acquisitions/disposals & fees.',     where:'Broker portal (PDF/CSV).',                                      required:true,  aliases:['contract note','trade confirmation'] },
  { key: 'corp_actions',        label: 'Corporate Actions Evidence',                  cadence:{adhoc:true},        why:'Affects base cost (splits, rights, DRIP/scrip).', where:'Broker notices/registrar.',                                     required:false, aliases:['corporate action','drip','rights issue'] },
  { key: 'crypto_history',      label: 'Crypto Full Trade History (CSV/API)',         cadence:{months:1},          why:'HMRC requires records; pooling; staking/airdrops.', where:'Exchange CSV/API; wallet explorers; tax tools.',               required:true,  aliases:['crypto history','exchange history','wallet history'] },
  { key: 'tenancy_agreements',  label: 'Tenancy Agreements (AST)',                    cadence:{adhoc:true},        why:'Evidence of rental terms & periods let.',        where:'Lettings agent or signed AST.',                                 required:false, aliases:['tenancy agreement','ast'] },
  { key: 'agent_statements',    label: 'Letting Agent Monthly Statements',            cadence:{months:1},          why:'Income/fees records for SA property pages.',     where:'Agent portal/email statements.',                                 required:true,  aliases:['agent statement','letting statement'] },
  { key: 'mortgage_interest',   label: 'Annual Mortgage Interest Certificate',        cadence:{yearlyBy:'05-31'},  why:'Loan interest deduction evidence (rental).',     where:'Lender annual certificate.',                                     required:true,  aliases:['mortgage interest certificate'] },
  { key: 'repairs_capital',     label: 'Repairs vs Capital Improvements Receipts',    cadence:{months:1},          why:'Split revenue vs capital for SA & future CGT.',  where:'Contractor invoices/receipts.',                                   required:true,  aliases:['repairs receipt','capital improvements'] },
  { key: 'purchase_completion', label: 'Purchase Completion Statement',               cadence:{adhoc:true},        why:'Establishes base cost; incl. legal fees & SDLT.', where:'Conveyancer/solicitor pack.',                                   required:true,  aliases:['purchase completion statement','completion statement'] },
  { key: 'sale_completion',     label: 'Sale Completion Statement',                   cadence:{adhoc:true},        why:'Proceeds & fees for CGT calculation.',           where:'Conveyancer/solicitor pack.',                                    required:true,  aliases:['sale completion statement'] },
  { key: 'sdlt_return',         label: 'SDLT Return & Calculation',                   cadence:{adhoc:true},        why:'Confirms SDLT paid and rates used.',              where:'Conveyancer or HMRC SDLT copy.',                                 required:true,  aliases:['sdlt'] },
  { key: 'equity_grants',       label: 'RSU/ESPP/Option Grant Agreements & Schedules', cadence:{adhoc:true},       why:'Defines vest/exercise terms; tax at vest.',       where:'Plan admin (Computershare/Equiniti/Fidelity).',                 required:true,  aliases:['grant agreement','equity grant'] },
  { key: 'equity_events',       label: 'Vest/Exercise/Sell Confirmations',            cadence:{months:1},          why:'Taxed amounts at vest/exercise; basis updates.', where:'Plan/Broker statements.',                                        required:true,  aliases:['vest confirmation','exercise confirmation','sale confirmation'] },
  { key: 'gift_aid',            label: 'Gift Aid Donation Schedule & Receipts',       cadence:{months:12},         why:'Gross-up claims in SA; higher rate relief.',      where:'Charity statements; CAF reports.',                               required:true,  aliases:['gift aid'] },
  { key: 'gifts_log',           label: 'Gifts Log (7-year IHT tracking)',             cadence:{months:12},         why:'Track annual exemptions & PETs for IHT.',         where:'Self-maintained log with evidence.',                             required:false, aliases:['gifts log','iht log'] },
  { key: 'student_loans',       label: 'Student/Postgrad Loan Statements',            cadence:{yearlyBy:'04-30'},  why:'Plan type and balance; check PAYE/SA deductions.', where:'SLC online account.',                                           required:false, aliases:['student loan statement','slc'] },
  { key: 'child_benefit',       label: 'Child Benefit Award & Payments',              cadence:{months:12},         why:'Assess HICBC if income exceeds thresholds.',      where:'GOV.UK child benefit service.',                                  required:false, aliases:['child benefit'] },
  { key: 'marriage_allowance',  label: 'Marriage Allowance Transfer Confirmation',    cadence:{yearlyBy:'01-31'},  why:'Impacts personal allowance transfer between spouses.', where:'GOV.UK marriage allowance service.',                         required:false, aliases:['marriage allowance'] }
];

module.exports = {
  DOCS,
  requiredDocs: DOCS.filter(d => d.required),
  helpfulDocs: DOCS.filter(d => !d.required)
};
